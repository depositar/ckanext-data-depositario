{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "The depositar Data Package",
  "description": "Data exchange format for datasets from the [depositar](https://data.depositar.io) research data repository.",
  "type": "object",
  "allOf": [
    {
      "$ref": "https://datapackage.org/profiles/2.0/datapackage.json"
    },
    {
      "required": [
        "resources",
        "name",
        "licenses",
        "contributors",
        "data_type"
      ],
      "properties": {
        "resources": {
          "description": "See [Data Package specification](https://datapackage.org/standard/data-package/#resources).",
          "type": "array",
          "items": {
            "oneOf": [
              {
                "required": [
                  "name",
                  "path"
                ],
                "properties": {
                  "name": {
                    "description": "See [Data Package specification](https://datapackage.org/standard/data-resource/#name)."
                  },
                  "path": {
                    "description": "See [Data Package specification](https://datapackage.org/standard/data-resource/#path-or-data)."
                  },
                  "title": {
                    "description": "See [Data Package specification](https://datapackage.org/standard/data-resource/#title)."
                  },
                  "description": {
                    "description": "See [Data Package specification](https://datapackage.org/standard/data-resource/#description)."
                  },
                  "format": {
                    "description": "See [Data Package specification](https://datapackage.org/standard/data-resource/#format)."
                  },
                  "mediatype": {
                    "description": "See [Data Package specification](https://datapackage.org/standard/data-resource/#mediatype)."
                  },
                  "encoding": {
                    "description": "See [Data Package specification](https://datapackage.org/standard/data-resource/#encoding)."
                  },
                  "bytes": {
                    "description": "See [Data Package specification](https://datapackage.org/standard/data-resource/#bytes)."
                  },
                  "ckan:id": {
                    "description": "The UUID of the resource.",
                    "type": "string"
                  },
                  "resource_crs": {
                    "description": "The coordinate systems of the resource. The EPSG (European Petroleum Survey Group) system has been used.",
                    "type": "number",
                    "exclusiveMinimum": 0,
                    "example": 4326
                  }
                }
              }
            ]
          }
        },
        "name": {
          "description": "See [Data Package specification](https://datapackage.org/standard/data-package/#name). The depositar DP makes this a required property."
        },
        "licenses": {
          "description": "See [Data Package specification](https://datapackage.org/standard/data-package/#licenses). The depositar DP makes this a required property and restricts name values.",
          "items": {
            "properties": {
              "name": {
                "enum": [
                  "notspecified",
                  "pd",
                  "cc-zero",
                  "cc-by",
                  "cc-by-sa",
                  "cc-by-nc-sa",
                  "odc-odbl",
                  "gfdl",
                  "twogd",
                  "other"
                ]
              }
            }
          }
        },
        "title": {
          "description": "See [Data Package specification](https://datapackage.org/standard/data-package/#title)."
        },
        "description": {
          "description": "See [Data Package specification](https://datapackage.org/standard/data-package/#description)."
        },
        "created": {
          "description": "See [Data Package specification](https://datapackage.org/standard/data-package/#created)."
        },
        "keywords": {
          "description": "See [Data Package specification](https://datapackage.org/standard/data-package/#keywords)."
        },
        "contributors": {
          "description": "See [Data Package specification](https://datapackage.org/standard/data-package/#contributors). The depositar DP makes this a required property and restricts role values. Can include people and organizations.",
          "items": {
            "properties": {
              "roles": {
                "items": {
                  "enum": [
                    "author",
                    "maintainer"
                  ]
                }
              }
            }
          }
        },
        "sources": {
          "description": "See [Data Package specification](https://datapackage.org/standard/data-package/#sources)."
        },
        "ckan:id": {
          "description": "The UUID of the dataset.",
          "type": "string"
        },
        "data_type": {
          "description": "The type of the dataset. The [PARSE.Insight Content-types](http://gfzpublic.gfz-potsdam.de/pubman/item/escidoc:1397899:6/component/escidoc:1398549/re3data_schema_documentation_v3_0.pdf) has been used.",
          "type": "array",
          "items": { "$ref": "#/$defs/data_type" },
          "uniqueItems": true,
          "minItems": 1
        },
        "wd_keywords": {
          "description": "The Wikidata items for keywords to describe the dataset.",
          "type": "array",
          "items": {
            "type": "string",
            "format": "uri"
          },
          "uniqueItems": true
        },
        "language": {
          "description": "The language of the dataset. Must be a language defined in ISO 639-3.",
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-z]{3}$"
          },
          "uniqueItems": true
        },
        "remarks": {
          "description": "Some supplementary information for the dataset. Markdown is encouraged.",
          "type": "string",
          "format": "textarea"
        },
        "temp_res": {
          "description": "The precision of a measurement with respect to time. It can be the minimal time interval between subsequent examinations, or the maximum time error when the time period is uncertain.",
          "type": "string",
          "enum": ["yearly", "daily", "monthly"]
        },
        "start_time": {
          "description": "The time related to contents of the dataset, not the time when the resources in the dataset were created or finished.",
          "$ref": "#/$defs/time_pattern"
        },
        "end_time": {
          "description": "The time related to contents of the dataset, not the time when the resources in the dataset were created or finished.",
          "$ref": "#/$defs/time_pattern"
        },
        "spatial": {
          "description": "A GeoJSON text to describe the spatial coverage of the dataset.",
          "type": "object",
          "$ref": "http://json.schemastore.org/geojson.json"
        },
        "x_min": {
          "description": "Westmost longitude of the spatial extent.",
          "type": "number",
          "minimum": -180,
          "maximum": 180
        },
        "x_max": {
          "description": "Eastmost longitude of the spatial extent.",
          "type": "number",
          "minimum": -180,
          "maximum": 180
        },
        "y_min": {
          "description": "Southmost latitude of the spatial extent.",
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "y_max": {
          "description": "Northmost latitude of the spatial extent.",
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "spatial_res": {
          "description": "Spatial resolution (in meter) of the dataset.",
          "type": "number",
          "exclusiveMinimum": 0
        },
        "created_time": {
          "description": "The time when the resources in the dataset were created.",
          "type": "string",
          "pattern": "^\\d{4}(-\\d{2})?(-\\d{2})?$"
        },
        "process_step": {
          "description": "Steps of data generating process. Markdown is encouraged.",
          "type": "string",
          "format": "textarea"
        },
        "contact_person": {
          "description": "The person responsible for maintaining the dataset.",
          "type": "string"
        },
        "contact_email": {
          "description": "The email of the person responsible for maintaining the dataset.",
          "type": "string",
          "format": "email"
        }
      }
    }
  ],
  "$defs": {
    "data_type": {
      "type": "string",
      "anyOf": [
        {
          "const": "archive",
          "title": "Archived data",
          "description": "ZIP, RAR, JAR, etc."
        },
        {
          "const": "code",
          "title": "Source code",
          "description": "scripting, Java, C, C++, Fortran, etc."
        },
        {
          "const": "config",
          "title": "Configuration data",
          "description": "parameter settings, logs, library files"
        },
        {
          "const": "database",
          "title": "Databases",
          "description": "MS Access, Oracle, MySQL, SQLite, PostgreSQL, etc."
        },
        {
          "const": "doc",
          "title": "Standard office documents",
          "description": "text documents, spreadsheets, presentations"
        },
        {
          "const": "graphic",
          "title": "Structured graphics",
          "description": "CAD, CAM, 3D, VRML, etc."
        },
        {
          "const": "image",
          "title": "Images",
          "description": "JPEG, JPEG2000, GIF, TIF, PNG, SVG, etc."
        },
        {
          "const": "multimedia",
          "title": "Audiovisual data",
          "description": "WAVE, MP3, MP4, WebM, FLAC, Ogg, etc."
        },
        {
          "const": "network",
          "title": "Networkbased data",
          "description": "websites, email, chat history, etc."
        },
        {
          "const": "raw",
          "title": "Raw data",
          "description": "device specific output"
        },
        {
          "const": "science",
          "title": "Scientific and statistical data formats",
          "description": "SPSS, FITS, GIS, etc."
        },
        {
          "const": "software",
          "title": "Software applications",
          "description": "modelling tools, editors, IDE, compilers, etc."
        },
        {
          "const": "structured",
          "title": "Structured text",
          "description": "CSV, XML, JSON, SGML, RTF, LaTeX, Markdown, ReST, etc."
        },
        {
          "const": "text",
          "title": "Plain text",
          "description": "TXT in various encodings"
        },
        {
          "const": "other",
          "title": "Other"
        }
      ]
    },
    "time_pattern": {
      "anyOf": [
        {
          "type": "string",
          "pattern": "^[0-9]{4}$"
        },
        {
          "type": "string",
          "pattern": "^([0-9]{4})-(1[0-2]|0[1-9])$"
        },
        {
          "type": "string",
          "pattern": "^([0-9]{4})-(1[0-2]|0[1-9])-(3[01]|[12][0-9]|0[1-9])$"
        }
      ]
    }
  }
}
